{% extends "layout.html" %}

{% block content %}
<div style="max-width: 1200px; margin: 0 auto;">
    <h1 style="margin-bottom: 2rem; text-align: center;">Team Matchup Intelligence</h1>

    <!-- Controls -->
    <div class="card" style="margin-bottom: 2rem; background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(10px);">
        <div style="display: grid; grid-template-columns: 1fr 1fr auto; gap: 2rem; align-items: end;">
            <div>
                <label style="display: block; color: #94A3B8; margin-bottom: 0.5rem; font-size: 0.9rem;">Team 1</label>
                <select id="t1"
                    style="width: 100%; padding: 0.8rem; background: #0F172A; border: 1px solid #334155; color: white; border-radius: 0.5rem; outline: none; transition: border-color 0.2s;"></select>
            </div>
            <div>
                <label style="display: block; color: #94A3B8; margin-bottom: 0.5rem; font-size: 0.9rem;">Team 2</label>
                <select id="t2"
                    style="width: 100%; padding: 0.8rem; background: #0F172A; border: 1px solid #334155; color: white; border-radius: 0.5rem; outline: none; transition: border-color 0.2s;"></select>
            </div>
            <button onclick="analyzeMatchup()"
                style="padding: 0.8rem 2rem; background: var(--accent); color: white; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer; height: 46px;">
                Analyze Matchup
            </button>
        </div>
    </div>

    <!-- Deep Dive Analysis Header & Period Filters (Moved Up) -->
    <div id="deep-dive-controls" style="display: none; margin-bottom: 2rem;">
        <h2 style="margin-bottom: 1.5rem;">Deep Dive Analysis</h2>

        <!-- Period Filter Buttons -->
        <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
            <button id="filter-last3" onclick="setPeriodFilter('last3')"
                style="padding: 0.6rem 1.5rem; background: #F59E0B; color: white; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer; transition: opacity 0.2s;">
                Last 3 Seasons
            </button>
            <button id="filter-last5" onclick="setPeriodFilter('last5')"
                style="padding: 0.6rem 1.5rem; background: #334155; color: white; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer; transition: opacity 0.2s;">
                Last 5 Seasons
            </button>
            <button id="filter-overall" onclick="setPeriodFilter('overall')"
                style="padding: 0.6rem 1.5rem; background: #334155; color: white; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer; transition: opacity 0.2s;">
                Overall
            </button>
            <select id="season-filter" onchange="filterDeepDive()"
                style="padding: 0.5rem 1rem; background: #1E293B; border: 1px solid #334155; color: white; border-radius: 0.5rem; outline: none; font-size: 0.9rem; margin-left: auto;">
                <option value="all">All Seasons (in period)</option>
            </select>
        </div>
    </div>

    <!-- Prediction Scorecard -->
    <div id="prediction-scorecard" style="display: none; margin-bottom: 2rem;">
        <div class="card"
            style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%); border: 2px solid rgba(56, 189, 248, 0.3); padding: 2rem;">
            <div style="text-align: center; margin-bottom: 1.5rem;">
                <h2
                    style="color: #94A3B8; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 2px; margin: 0;">
                    Match Prediction</h2>
                <p id="prediction-period-label" style="color: #64748B; font-size: 0.85rem; margin-top: 0.5rem;"></p>
            </div>

            <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 2rem; align-items: center;">
                <!-- Team 1 -->
                <div style="text-align: center;">
                    <div id="pred-team1-name"
                        style="font-size: 1.5rem; font-weight: 700; color: white; margin-bottom: 1rem;"></div>
                    <div id="pred-team1-prob"
                        style="font-size: 3.5rem; font-weight: 900; background: linear-gradient(135deg, var(--accent), #38BDF8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                    </div>
                    <div style="color: #94A3B8; font-size: 0.9rem; margin-top: 0.5rem;">Win Probability</div>
                </div>

                <!-- VS Separator -->
                <div style="text-align: center;">
                    <div
                        style="width: 60px; height: 60px; border-radius: 50%; background: rgba(56, 189, 248, 0.2); display: flex; align-items: center; justify-content: center; border: 2px solid var(--accent);">
                        <span style="font-size: 1.2rem; font-weight: 700; color: var(--accent);">VS</span>
                    </div>
                </div>

                <!-- Team 2 -->
                <div style="text-align: center;">
                    <div id="pred-team2-name"
                        style="font-size: 1.5rem; font-weight: 700; color: white; margin-bottom: 1rem;"></div>
                    <div id="pred-team2-prob"
                        style="font-size: 3.5rem; font-weight: 900; background: linear-gradient(135deg, #F43F5E, #F59E0B); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                    </div>
                    <div style="color: #94A3B8; font-size: 0.9rem; margin-top: 0.5rem;">Win Probability</div>
                </div>
            </div>

            <!-- Prediction Bar -->
            <div style="margin-top: 2rem;">
                <div
                    style="display: flex; height: 16px; border-radius: 8px; overflow: hidden; background: #1E293B; box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);">
                    <div id="pred-bar-team1"
                        style="background: linear-gradient(90deg, var(--accent), #38BDF8); transition: width 0.5s ease;">
                    </div>
                    <div id="pred-bar-team2"
                        style="background: linear-gradient(90deg, #F59E0B, #F43F5E); transition: width 0.5s ease;">
                    </div>
                </div>
                <div
                    style="display: flex; justify-content: space-between; margin-top: 0.5rem; font-size: 0.8rem; color: #64748B;">
                    <span id="pred-verdict"></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Container -->
    <div id="result-container" style="display: none;">

        <!-- 3 Cards Layout -->
        <div
            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
            <!-- Card 1: Recent Form (Last 3 Seasons) -->
            <div class="card" style="border-top: 4px solid #F59E0B; cursor: pointer;"
                onclick="setPeriodFilter('last3')">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h3
                        style="color: #94A3B8; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; margin: 0;">
                        Recent Form (Last 3 Seasons)</h3>
                    <div id="prediction-l3" style="font-size: 1.2rem; font-weight: 700; color: #F59E0B;"></div>
                </div>
                <div id="card-l3-content"></div>
            </div>

            <!-- Card 2: Medium Term (Last 5 Seasons) -->
            <div class="card" style="border-top: 4px solid #38BDF8; cursor: pointer;"
                onclick="setPeriodFilter('last5')">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h3
                        style="color: #94A3B8; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; margin: 0;">
                        Medium Term (Last 5 Seasons)</h3>
                    <div id="prediction-l5" style="font-size: 1.2rem; font-weight: 700; color: #38BDF8;"></div>
                </div>
                <div id="card-l5-content"></div>
            </div>

            <!-- Card 3: Overall History -->
            <div class="card" style="border-top: 4px solid #10B981; cursor: pointer;"
                onclick="setPeriodFilter('overall')">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h3
                        style="color: #94A3B8; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; margin: 0;">
                        Overall History</h3>
                    <div id="prediction-overall" style="font-size: 1.2rem; font-weight: 700; color: #10B981;"></div>
                </div>
                <div id="card-overall-content"></div>
            </div>
        </div>

        <!-- Insights Text -->
        <div class="card" style="margin-bottom: 2rem;">
            <h3
                style="color: #94A3B8; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 1rem;">
                Key Insights</h3>
            <div id="insights-container" style="display: grid; grid-template-columns: 1fr; gap: 1rem;"></div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; align-items: start;">
            <!-- Venue Performance Table -->
            <div class="card">
                <h3
                    style="color: #94A3B8; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 1rem;">
                    Venue Performance</h3>
                <div style="overflow-x: auto;">
                    <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                        <thead>
                            <tr style="border-bottom: 1px solid #334155;">
                                <th style="text-align: left; padding: 0.75rem; color: #94A3B8;">Venue</th>
                                <th style="text-align: center; padding: 0.75rem; color: #94A3B8;">P</th>
                                <th style="text-align: center; padding: 0.75rem; color: var(--accent);">W1</th>
                                <th style="text-align: center; padding: 0.75rem; color: #F43F5E;">W2</th>
                            </tr>
                        </thead>
                        <tbody id="venue-stats-body"></tbody>
                    </table>
                </div>
            </div>

            <!-- Match History Grid -->
            <div>
                <h3
                    style="color: #94A3B8; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 1rem;">
                    Match History</h3>
                <div id="match-list" style="display: grid; gap: 1rem;"></div>
            </div>
        </div>

    </div>
</div>

<script>
    let predictionData = {};
    let currentMatchupKey = null;
    let currentPeriod = 'last3'; // Default to Last 3 Seasons

    // Load data
    fetch('/data/prediction_data.json')
        .then(r => r.json())
        .then(data => {
            predictionData = data;
            const teams = data.teams;
            const s1 = document.getElementById('t1');
            const s2 = document.getElementById('t2');

            teams.forEach(t => {
                s1.add(new Option(t, t));
                s2.add(new Option(t, t));
            });

            // Set defaults if available
            if (teams.length > 1) {
                s1.value = teams[0];
                s2.value = teams[1];
            }
        });

    function getTeamColor(team) {
        // Simple hash to color or predefined map
        // For now using generic logic or could add a map
        return '#fff';
    }

    function setPeriodFilter(period) {
        currentPeriod = period;

        // Update button styles
        document.getElementById('filter-last3').style.background = period === 'last3' ? '#F59E0B' : '#334155';
        document.getElementById('filter-last5').style.background = period === 'last5' ? '#38BDF8' : '#334155';
        document.getElementById('filter-overall').style.background = period === 'overall' ? '#10B981' : '#334155';

        // Update prediction scorecard
        updatePredictionScorecard();

        // Reset season filter and update Deep Dive
        document.getElementById('season-filter').value = 'all';
        filterDeepDive();
    }

    function updatePredictionScorecard() {
        if (!currentMatchupKey || !predictionData.matchups[currentMatchupKey]) return;

        const data = predictionData.matchups[currentMatchupKey];
        const t1 = document.getElementById('t1').value;
        const t2 = document.getElementById('t2').value;

        // Get stats for current period
        let stats = null;
        let periodLabel = '';
        if (currentPeriod === 'last3') {
            stats = data.last_3;
            periodLabel = 'Based on Last 3 Seasons';
        } else if (currentPeriod === 'last5') {
            stats = data.last_5;
            periodLabel = 'Based on Last 5 Seasons';
        } else {
            stats = data.overall;
            periodLabel = 'Based on Overall History';
        }

        if (!stats) {
            document.getElementById('prediction-scorecard').style.display = 'none';
            return;
        }

        document.getElementById('prediction-scorecard').style.display = 'block';
        document.getElementById('prediction-period-label').textContent = periodLabel;

        // Team names
        document.getElementById('pred-team1-name').textContent = t1;
        document.getElementById('pred-team2-name').textContent = t2;

        // Calculate probabilities (need to map to UI selection)
        const teams_sorted = [t1, t2].sort();
        const t1_is_first = t1 === teams_sorted[0];

        const t1_prob = t1_is_first ? stats.t1_win_pct : stats.t2_win_pct;
        const t2_prob = t1_is_first ? stats.t2_win_pct : stats.t1_win_pct;

        document.getElementById('pred-team1-prob').textContent = Math.round(t1_prob) + '%';
        document.getElementById('pred-team2-prob').textContent = Math.round(t2_prob) + '%';

        // Update bar
        document.getElementById('pred-bar-team1').style.width = t1_prob + '%';
        document.getElementById('pred-bar-team2').style.width = t2_prob + '%';

        // Verdict
        const favorite = t1_prob > t2_prob ? t1 : t2;
        const margin = Math.abs(t1_prob - t2_prob);
        let verdict = '';
        if (margin > 20) {
            verdict = `${favorite} are strong favorites`;
        } else if (margin > 10) {
            verdict = `${favorite} have the edge`;
        } else {
            verdict = 'Evenly matched contest';
        }
        document.getElementById('pred-verdict').textContent = verdict;
    }

    function renderCard(id, stats, t1, t2) {
        const container = document.getElementById(id);
        if (!stats) {
            container.innerHTML = `
                <div style="text-align: center; padding: 2rem; color: #64748B;">
                    No matches played in this period.
                </div>
            `;
            return;
        }

        // Calculate bar widths
        const total = stats.played;
        const w1 = stats.t1_wins;
        const w2 = stats.t2_wins;
        const draws = stats.draws;

        const p1 = (w1 / total * 100).toFixed(0);
        const p2 = (w2 / total * 100).toFixed(0);
        const pd = (draws / total * 100).toFixed(0);

        container.innerHTML = `
            <div style="text-align: center; margin-bottom: 1.5rem;">
                <div style="font-size: 2.5rem; font-weight: 700; display: flex; align-items: center; justify-content: center; gap: 1rem;">
                    <span style="color: ${w1 > w2 ? '#10B981' : (w1 < w2 ? '#94A3B8' : '#F59E0B')}">${w1}</span>
                    <span style="font-size: 1rem; color: #64748B; font-weight: 400;">vs</span>
                    <span style="color: ${w2 > w1 ? '#10B981' : (w2 < w1 ? '#94A3B8' : '#F59E0B')}">${w2}</span>
                </div>
                <div style="font-size: 0.9rem; color: #64748B;">Matches Played: ${total}</div>
            </div>

            <!-- Win Bar -->
            <div style="display: flex; height: 12px; border-radius: 6px; overflow: hidden; margin-bottom: 1.5rem; background: #1E293B;">
                <div style="width: ${p1}%; background: var(--accent);" title="${t1} Wins"></div>
                ${pd > 0 ? `<div style="width: ${pd}%; background: #64748B;" title="Draws"></div>` : ''}
                <div style="width: ${p2}%; background: #F43F5E;" title="${t2} Wins"></div>
            </div>
            
            <div style="display: flex; justify-content: space-between; font-size: 0.85rem; color: #94A3B8; margin-bottom: 1rem;">
                <div><span style="color: var(--accent);">●</span> ${t1} (${p1}%)</div>
                <div>${t2} (${p2}%) <span style="color: #F43F5E;">●</span></div>
            </div>

            <!-- Stats Grid -->
            <div style="background: rgba(15, 23, 42, 0.5); border-radius: 0.5rem; padding: 1rem;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                    <span>Avg Score (${t1})</span>
                    <strong style="color: #E2E8F0;">${stats.avg_score_t1}</strong>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span>Avg Score (${t2})</span>
                    <strong style="color: #E2E8F0;">${stats.avg_score_t2}</strong>
                </div>
            </div>
        `;
    }

    function analyzeMatchup() {
        const t1 = document.getElementById('t1').value;
        const t2 = document.getElementById('t2').value;

        if (t1 === t2) {
            alert("Please select different teams.");
            return;
        }

        const teams = [t1, t2].sort();
        const key = `${teams[0]}_vs_${teams[1]}`;
        currentMatchupKey = key;

        const data = predictionData.matchups[key];
        const container = document.getElementById('result-container');

        if (!data) {
            container.style.display = 'block';
            document.getElementById('deep-dive-controls').style.display = 'none';
            container.innerHTML = `<div style="text-align:center; padding: 3rem; color: #64748B;">No matchup data found for these teams.</div>`;
            return;
        }

        container.style.display = 'block';
        document.getElementById('deep-dive-controls').style.display = 'block';

        // Render Summary Cards with Prediction Scores
        const t1_sorted = teams[0];
        const t2_sorted = teams[1];

        renderCard('card-l3-content', data.last_3, t1_sorted, t2_sorted);
        renderCard('card-l5-content', data.last_5, t1_sorted, t2_sorted);
        renderCard('card-overall-content', data.overall, t1_sorted, t2_sorted);

        // Display Prediction Scores
        if (data.last_3) {
            const pred3 = data.last_3.t1_win_pct > data.last_3.t2_win_pct ?
                `${Math.round(data.last_3.t1_win_pct)}%` : `${Math.round(data.last_3.t2_win_pct)}%`;
            document.getElementById('prediction-l3').textContent = pred3;
        }
        if (data.last_5) {
            const pred5 = data.last_5.t1_win_pct > data.last_5.t2_win_pct ?
                `${Math.round(data.last_5.t1_win_pct)}%` : `${Math.round(data.last_5.t2_win_pct)}%`;
            document.getElementById('prediction-l5').textContent = pred5;
        }
        if (data.overall) {
            const predOverall = data.overall.t1_win_pct > data.overall.t2_win_pct ?
                `${Math.round(data.overall.t1_win_pct)}%` : `${Math.round(data.overall.t2_win_pct)}%`;
            document.getElementById('prediction-overall').textContent = predOverall;
        }

        // Insights
        const insightsContainer = document.getElementById('insights-container');
        insightsContainer.innerHTML = '';
        let allInsights = [];
        if (data.last_3?.insights) allInsights = allInsights.concat(data.last_3.insights);
        if (data.last_5?.insights) allInsights = allInsights.concat(data.last_5.insights);
        if (data.overall?.insights) allInsights = allInsights.concat(data.overall.insights);
        allInsights = [...new Set(allInsights)];

        if (allInsights.length === 0) {
            insightsContainer.innerHTML = '<div style="color: #64748B;">No specific insights available for this matchup.</div>';
        } else {
            allInsights.forEach(insight => {
                const div = document.createElement('div');
                div.style.padding = '0.75rem';
                div.style.borderLeft = '4px solid var(--accent)';
                div.style.background = 'rgba(15, 23, 42, 0.3)';
                div.style.borderRadius = '0 0.5rem 0.5rem 0';
                div.innerHTML = insight;
                insightsContainer.appendChild(div);
            });
        }

        // Initial Deep Dive Render (default to Last 3)
        currentPeriod = 'last3';
        setPeriodFilter('last3');
    }

    function filterDeepDive() {
        if (!currentMatchupKey || !predictionData.matchups[currentMatchupKey]) return;

        const data = predictionData.matchups[currentMatchupKey];
        const allMatches = data.matches || [];
        const season = document.getElementById('season-filter').value;
        const t1_name = document.getElementById('t1').value;
        const t2_name = document.getElementById('t2').value;

        // Get current year for period filtering
        const currentYear = new Date().getFullYear();

        // Filter by period first
        let periodMatches = allMatches;
        if (currentPeriod === 'last3') {
            periodMatches = allMatches.filter(m => m.season >= currentYear - 3);
        } else if (currentPeriod === 'last5') {
            periodMatches = allMatches.filter(m => m.season >= currentYear - 5);
        }
        // 'overall' uses all matches

        // Update season dropdown based on period
        const seasonSelect = document.getElementById('season-filter');
        const currentSeasonValue = seasonSelect.value;
        seasonSelect.innerHTML = '<option value="all">All Seasons (in period)</option>';
        const seasons = [...new Set(periodMatches.map(m => m.season))].sort((a, b) => b - a);
        seasons.forEach(s => {
            if (s > 0) seasonSelect.add(new Option(s, s));
        });
        // Restore selection if still valid
        if (seasons.includes(parseInt(currentSeasonValue))) {
            seasonSelect.value = currentSeasonValue;
        } else {
            seasonSelect.value = 'all';
        }

        // Then filter by specific season if selected
        const filteredMatches = season === 'all'
            ? periodMatches
            : periodMatches.filter(m => m.season == season);

        // 1. Render Match List
        const matchList = document.getElementById('match-list');
        matchList.innerHTML = '';

        if (filteredMatches.length === 0) {
            matchList.innerHTML = '<div style="color: #64748B; text-align: center; padding: 2rem;">No matches found for this filter.</div>';
        } else {
            filteredMatches.forEach(m => {
                const isT1Winner = m.winner === t1_name;
                const dateStr = new Date(m.date).toLocaleDateString('en-GB', { day: 'numeric', month: 'short', year: 'numeric' });

                const card = document.createElement('div');
                card.className = 'card';
                card.style.padding = '1rem';
                card.style.borderLeft = isT1Winner ? '4px solid var(--accent)' : (m.winner === t2_name ? '4px solid #F43F5E' : '4px solid #94A3B8');

                card.innerHTML = `
                    <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: #94A3B8; margin-bottom: 0.5rem;">
                        <span>${dateStr} (${m.season})</span>
                        <span>${m.venue}</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <div style="font-weight: 600; color: ${m.winner === t1_name ? 'var(--accent)' : 'white'};">${t1_name}</div>
                        <div style="font-size: 0.9rem; font-weight: 700;">
                           ${m.team1 === t1_name ? m.score1 : m.score2} - ${m.team1 === t1_name ? m.score2 : m.score1}
                        </div>
                        <div style="font-weight: 600; color: ${m.winner === t2_name ? '#F43F5E' : 'white'};">${t2_name}</div>
                    </div>
                    <div style="font-size: 0.85rem; color: #E2E8F0; text-align: center; background: rgba(30, 41, 59, 0.5); padding: 0.4rem; border-radius: 0.25rem;">
                        Winner: <span style="color: ${m.winner === t1_name ? 'var(--accent)' : (m.winner === t2_name ? '#F43F5E' : 'white')}">${m.winner}</span> 
                        <span style="color: #94A3B8;">by ${m.win_margin}</span>
                    </div>
                    ${m.mom && m.mom !== 'N/A' ? `<div style="font-size: 0.75rem; color: #64748B; margin-top: 0.5rem; text-align: right;">MOM: ${m.mom}</div>` : ''}
                `;
                matchList.appendChild(card);
            });
        }

        // 2. Compute & Render Venue Stats
        const venueStatsBody = document.getElementById('venue-stats-body');
        venueStatsBody.innerHTML = '';

        const venueMap = {};

        filteredMatches.forEach(m => {
            if (!venueMap[m.venue]) venueMap[m.venue] = { played: 0, w1: 0, w2: 0 };
            venueMap[m.venue].played++;
            if (m.winner === t1_name) venueMap[m.venue].w1++;
            else if (m.winner === t2_name) venueMap[m.venue].w2++;
        });

        const sortedVenues = Object.entries(venueMap).sort((a, b) => b[1].played - a[1].played);

        if (sortedVenues.length === 0) {
            venueStatsBody.innerHTML = '<tr><td colspan="4" style="text-align: center; padding: 1rem; color: #64748B;">No venue data.</td></tr>';
        } else {
            sortedVenues.forEach(([venue, stats]) => {
                const tr = document.createElement('tr');
                tr.style.borderBottom = '1px solid #1E293B';
                tr.innerHTML = `
                    <td style="padding: 0.75rem; color: #E2E8F0; font-size: 0.85rem;">${venue}</td>
                    <td style="text-align: center; padding: 0.75rem; color: #94A3B8;">${stats.played}</td>
                    <td style="text-align: center; padding: 0.75rem; color: var(--accent); font-weight: 600;">${stats.w1}</td>
                    <td style="text-align: center; padding: 0.75rem; color: #F43F5E; font-weight: 600;">${stats.w2}</td>
                `;
                venueStatsBody.appendChild(tr);
            });
        }
    }
</script>
{% endblock %}